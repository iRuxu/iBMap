var iBMap={version:"1.1",github:"git@github.com:iRuxu/iBMap.git",BMap:{},ak:"",_lat:0,_lng:0,_zoom:5,_title:"",_content:"",_status:!1,_width:0,_height:0,_icon:{},geo:{lat:35.16277754545299,lng:112.81271748030389,zoom:16,title:"我的位置",content:"目的地",status:!1,width:290,height:"",icon:{url:"",width:0,height:0}},geolist:[],init:function(t,o,a){return t&&o?(iBMap.ak=t,iBMap.BMap=new BMap.Map(o),iBMap.BMap.addControl(new BMap.NavigationControl),iBMap.BMap.enableScrollWheelZoom(),!!a&&(iBMap.geo=a),iBMap):void console.error("[iBMap]初始化失败，传入的AK或选择器ID不正确")},geocode:function(t,o){return t?void $.ajax({url:"http://api.map.baidu.com/geocoder/v2/",type:"get",dataType:"jsonp",data:{ak:iBMap.ak,address:t,output:"json"},success:function(a){var i={};i.lat=a.result.location.lat,i.lng=a.result.location.lng,console.log("[iBMap]正地理编码结果",t,i),!!o&&o(i)},error:function(){console.error("[iBMap]无法连接百度地图正/逆地理编码接口")}}):void console.error("[iBMap]正地理编码失败，请输入有效的字符串地址")},position:function(t,o){iBMap._lng=t.lng||iBMap.geo.lng,iBMap._lat=t.lat||iBMap.geo.lat,iBMap._zoom=t.zoom||iBMap.geo.zoom;var a=new BMap.Point(t.lng,t.lat);return iBMap.BMap.centerAndZoom(a,t.zoom),!!o&&o(),iBMap},cn:function(t){var o=new BMap.Point(iBMap.geo.lng,iBMap.geo.lat);return iBMap.BMap.centerAndZoom(o,5),!!t&&t(),iBMap},openInfo:function(t,o){var a=new BMap.Point(t.lng,t.lat),i=new BMapLib.SearchInfoWindow(iBMap.BMap,t.content,{title:t.title,width:t.width,height:t.height,panel:"panel",enableAutoPan:!0,searchTypes:[BMAPLIB_TAB_SEARCH,BMAPLIB_TAB_TO_HERE,BMAPLIB_TAB_FROM_HERE]});!!o&&i.open(a,t.zoom)},marker:function(t,o){function a(t){e.addEventListener("click",function(a){iBMap.openInfo(t,!0),!!o&&o(t)})}if(!t.lng||!t.lat)return void console.error("[iBMap]添加标记失败,传入的地理信息对象有误");iBMap._lng=t.lng,iBMap._lat=t.lat,iBMap._zoom=t.zoom=t.zoom?t.zoom:iBMap.geo.zoom,iBMap._title=t.title=t.title?t.title:"",iBMap._content=t.content=t.content?t.content:"",iBMap._width=t.width=t.width?t.width:iBMap.geo.width,iBMap._height=t.height=t.height?t.height:iBMap.geo.height,iBMap.geolist.push(t);var i=new BMap.Point(t.lng,t.lat);if(iBMap.BMap.centerAndZoom(i,iBMap._zoom),t.icon)var n=new BMap.Icon(t.icon.url,new BMap.Size(t.icon.width,t.icon.height)),e=new BMap.Marker(i,{icon:n});else var e=new BMap.Marker(i);return iBMap.BMap.addOverlay(e),a(t),!!t.status&&iBMap.openInfo(t,!0),iBMap},URI:{marker:function(t,o){var a="http://api.map.baidu.com/marker?location="+o.lat+","+o.lng+"&title="+o.title+"&content="+o.content+"&output=html";document.getElementById(t).src=a}}};